# 🎙️ Chapter 2-1: 架構師的腦內模擬 (黃金平衡版)

### **(00:00) 開場：停下來，先思考**
**(語氣：沈穩、像朋友聊天)**
嗨，我是 Cab。
這一個小節，我們不寫 Code，先把螢幕關掉。
我想邀請你進入我的大腦，我們來跑一場「模擬演習」。

這章節對 Vibe Coder 來說稍微硬一點，但我希望你能聽進去。
因為我知道，你想做的絕對不只是一個玩具，而是一個能跑、能賺錢、甚至能長久運作的產品。
如果在寫第一行程式碼之前，你沒有先把這張地圖想清楚，相信我，後面你花在修 Bug 和重構的時間，絕對是你現在聽這幾分鐘的十倍以上。

---

### **(01:00) 驗證層：不要死在起跑點**
**(語氣：果斷、專業)**
第一步，當一個 Idea 冒出來，比如「我想做個 AI 自動發文機器人」。
新手的第一個動作通常是去畫 UI、想按鈕放哪。
**錯了。** 在高手眼裡，我們只在乎一件事：**「核心技術通了嗎？」**

我會立刻問自己：那個平台的 API 真的開放發文嗎？如果不開放，我能不能寫腳本模擬？
這一步非常現實。如果不先驗證核心，你介面做得再漂亮、金流接得再順，產品根本跑不動，那就是白忙一場。
所以，**先驗證核心，再包裝外殼。** 這是 MVP 的第一條鐵律。

---

### **(02:00) 商業層：資料庫是被「倒逼」出來的**
**(語氣：強調因果關係，針對 Billy 的痛點)**
驗證可行後，下一步要想：「我要怎麼賣？」
這不是行銷問題，這是**資料庫設計問題**。

試想一下：
*   你是要**「一次性買斷」**？那資料庫只要記個 `Paid: True` 就好。
*   還是要**「訂閱制」**？那事情就複雜了，你必須記住「訂閱週期」、「下次扣款日」、「權限狀態」。

很多開發者常犯的錯，就是沒想清楚就先開工。等到產品做好了，才突然想改訂閱制。
這時候你會發現，你的資料結構完全不對，地基要挖掉重練。那個痛苦指數是最高的。
所以，**先定好商業模式，你的資料庫長相自然就出來了。**

---

### **(03:30) 安全層：識別 API Key 與信任邊界**
**(語氣：嚴肅、警示，針對 Bo-Jun 的盲點)**
既然要賣服務，就會牽扯到「串接」。
這裡給大家一個職業級的反射動作：**只要看到「串接」這兩個字，腦袋就要浮現 "API Key"。**

這把 Key 是你服務的身分證，也是你的信用卡。
我看過太多 AI 寫出來的程式碼，直接把 Key 寫在前端網頁裡。
大家要有一個觀念：**瀏覽器是透明的。** 任何寫在前端的東西，駭客按個 F12 就能看光光。
如果你把金流 Key 放前端，別人就能用你的名義退款、搞破壞。

所以，為什麼我們需要一個後端伺服器？
不是為了耍帥，而是為了**「把鑰匙藏在保險箱裡」**。這就是前後端分離最重要的資安意義。

---

### **(05:00) 支付層：選擇戰場，轉嫁風險**
**(語氣：展現顧問價值)**
Key 藏好了，那金流要怎麼接？
通常有兩條路：
1.  **幕後交易 (API)**：用戶在你家填卡號，體驗好，看起來像大公司。
2.  **跳轉支付 (Hosted Page)**：把用戶送去綠界或 Stripe 的頁面刷卡。

新手通常想選第一種。但身為架構師，我強烈建議選**第二種**。
為什麼？因為只要信用卡號「路過」你的伺服器，你就必須遵守 **PCI-DSS** 這種銀行級的資安規範。那個稽核成本和風險，不是個人開發者扛得起的。

我們選擇跳轉支付，不是偷懶，而是聰明的**「風險轉移」**。讓金流商去扛資安責任，我們專心做產品。

---

### **(06:15) 同步層：不要問，聽他說**
**(語氣：描述使用者體驗)**
好，用戶跳轉去付錢了。你怎麼知道他成功沒？
千萬不要寫程式去「每分鐘查詢 (Polling)」。
你想想，用戶付完錢，還要盯著螢幕轉圈圈等你的程式去查，那體驗多差？

我們要用 **Webhook**。
簡單說，就是讓金流商**「主動通知」**我們。
這能確保用戶付完錢的當下，手機就能「叮」一聲收到服務開通的通知。
**主動推播，永遠比被動查詢更即時、更省資源。** 這才是現代化的架構。

---

### **(07:30) 資料層：簡單就是力量**
**(語氣：務實、靈活)**
最後，這一切資料存哪？
很多人糾結要不要架厲害的 SQL 資料庫。
但在 MVP 階段，我認為**「看得到」比「效能好」更重要**。

如果可以用 **Google Sheets** 就搞定，為什麼要折騰？
它免費、有 API、你甚至可以用手機 App 隨時查訂單、手動幫朋友開通權限。
我不是說它能取代正規資料庫，但在初期驗證階段，這種**「極致的便利性」**就是你的優勢。

---

### **(08:30) 總結：Happy Path**
**(語氣：總結、激勵)**
好，回顧一下我們腦中跑完的這張地圖：
1.  **核心驗證**，不浪費時間做殼。
2.  **確認商模**，定好資料結構。
3.  **後端藏 Key**，保護資安。
4.  **跳轉支付**，轉嫁風險。
5.  **Webhook 同步**，即時體驗。
6.  **Google Sheets**，快速管理。

把這六點串起來，就是我們這堂課要實作的 **Happy Path**。
這不是隨便拼湊的程式碼，這是一套經過深思熟慮、能讓你避開 90% 坑的**「生存架構」**。
有了這張圖，接下來我們寫 Code，就只是把想法翻譯出來而已。

準備好了嗎？我們下一章見。

